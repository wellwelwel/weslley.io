"use strict";(self.webpackChunkweslley_io=self.webpackChunkweslley_io||[]).push([[3171],{6320:function(e){e.exports=JSON.parse('{"title":"Introduzindo Testes Unit\xe1rios para Devs Iniciantes","slug":"introduzindo-testes-unitarios-para-devs-iniciantes","date":"2024-06-10","authors":["Weslley Ara\xfajo"],"tags":["Testes","Testes Unit\xe1rios","Node.js"],"content":"\\nSe voc\xea \xe9 um desenvolvedor iniciante (_ou n\xe3o_), eu quero te mostrar que testes podem sim ser simples e que a complexidade s\xf3 vem conforme nossa pr\xf3pria necessidade, n\xe3o do _tester_.\\n\\n{/* truncate */}\\n\\nimport { Modal } from \'@Modal\';\\n\\n<hr />\\n\\n## \ud83e\uddd1\ud83c\udffb\u200d\ud83c\udf93 Introdu\xe7\xe3o ao Mundo dos Testes\\n\\nImagine um sistema onde v\xe1rios usu\xe1rios tiveram a conta invadida porque criaram senhas como \\"`1234`\\" e o sistema permitia, mesmo tendo uma valida\xe7\xe3o para isso, mas sem garantia nenhuma que essa fun\xe7\xe3o estava realmente funcionando \ud83e\udd72\\n\\nIsso facilmente seria evitado se existissem testes garantindo que a fun\xe7\xe3o que valida a senha funcionasse como deveria sempre que uma modifica\xe7\xe3o \xe9 feita no sistema, concorda? \ud83d\udd10\\n\\nMas quando um dev iniciante procura por **testes automatizados**, isso pode parecer (_ou at\xe9 **ser**_) complexo:\\n\\n- Os _**testers**_ podem exigir configura\xe7\xf5es de ambiente (especialmente quando se trata de **ESM** e **TypeScript**)\\n- Podem mudar o comportamento do ambiente de desenvolvimento\\n- Podem exigir que voc\xea adapte seu c\xf3digo para funcionar com eles\\n- E at\xe9 que voc\xea tenha um conhecimento previamente aprofundado sobre eles (documenta\xe7\xe3o) para simplesmente iniciar\\n\\n<hr />\\n\\n## \ud83d\udcda Escolhendo o _Tester_\\n\\nAtualmente, existem muitos testers, alguns focados em boas pr\xe1ticas, outros focados na produtividade, performance e por a\xed vai.\\n\\nAlguns dos mais populares:\\n\\n<ul>\\n  <li>\\n    <Modal trigger=\\"Jest\\" title={<><img src=\\"/img/jest.svg\\" alt=\\"Jest icon\\" /> Jest</>}>\\n      **Jest** \xe9 um framework de testes JavaScript mantido pelo **Meta** (Facebook), com foco em oferecer uma solu\xe7\xe3o **completa e integrada**.\\n\\n      Possui recursos integrados como **mocking autom\xe1tico**, **cobertura de c\xf3digo** e **snapshot testing**, sendo especialmente popular em projetos **React**.\\n\\n      Por ser uma solu\xe7\xe3o all-in-one, pode exigir **configura\xe7\xf5es complexas** para projetos modernos (especialmente **ESM** e **TypeScript**), al\xe9m de ter **performance inferior** comparado a alternativas mais modernas.\\n    </Modal>\\n\\n  </li>\\n  <li>\\n    <Modal trigger=\\"Mocha\\" title=\\"Mocha\\">\\n      **Mocha** \xe9 um test runner **minimalista e flex\xedvel** para Node.js, focado em **simplicidade** e **extensibilidade**.\\n\\n      Diferente do Jest, o Mocha n\xe3o inclui biblioteca de asser\xe7\xf5es ou mocking, permitindo que voc\xea escolha suas pr\xf3prias ferramentas (geralmente usado com **Chai** para asser\xe7\xf5es e **Sinon** para mocks).\\n\\n      \xc9 ideal para quem prefere **controle total** sobre o ambiente de testes, mas exige mais configura\xe7\xe3o manual.\\n    </Modal>\\n\\n  </li>\\n  <li>\\n    <Modal trigger=\\"Vitest\\" title=\\"Vitest\\">\\n      **Vitest** \xe9 um test runner **moderno**, desenvolvido pela mesma equipe do **Vite**.\\n\\n      Possui API **compat\xedvel com Jest**, facilitando migra\xe7\xe3o, e oferece suporte nativo para **ESM**, **TypeScript** e **HMR** (Hot Module Replacement).\\n\\n      Por estar acoplado ao **Vite**, pode n\xe3o ser ideal para todos os projetos, especialmente aqueles que n\xe3o usam bundlers ou preferem outras ferramentas de build, tendo **foco maior em frontend** (embora funcione em backend), e **n\xe3o oferece suporte para CommonJS (CJS)**.\\n    </Modal>\\n\\n  </li>\\n</ul>\\n\\nPara esse tutorial, vamos usar um _tester_ que eu criei ([**Poku**](https://github.com/wellwelwel/poku)), devido sua simplicidade, mas voc\xea pode usar qualquer um \ud83d\ude80\\n\\n### \ud83d\udce6 Instalando nosso **_Tester_**\\n\\n```bash\\nnpm i -D poku\\n```\\n\\n<hr />\\n\\n## \ud83e\uddea Por que \\"Unit\xe1rios\\"?\\n\\nAo desenvolvermos nossos c\xf3digos, \xe9 comum dividirmos tarefas pequenas em fun\xe7\xf5es menores, ent\xe3o exportamos essas fun\xe7\xf5es para us\xe1-las em v\xe1rios lugares no nosso c\xf3digo, certo?\\n\\nCriar os **testes unit\xe1rios** garante que essas _\\"fun\xe7\xf5es unit\xe1rias\\"_ sempre funcionem como esperado \ud83e\uddd9\ud83c\udffb\\n\\n<hr />\\n\\n## \ud83d\udccb Criando um Projeto Simples\\n\\nVamos elaborar um projeto bem simples, onde iremos apenas validar uma senha.\\nNosso projeto precisa validar se a senha passada:\\n\\n- \u2705 \xc9 uma string\\n- \u2705 Possui ao menos oito caract\xe9res\\n- \u2705 Possui ao menos uma letra mai\xfascula\\n- \u2705 Possui ao menos uma letra min\xfascula\\n- \u2705 Possui ao menos um n\xfamero\\n\\nSe a senha for v\xe1lida, devemos retornar `true`, caso contr\xe1rio, `false`.\\n\\nPara isso, iremos criar o arquivo:\\n\\n- **src/validations.mjs**\\n\\n```ts\\nexport const validatePassword = (password) => {\\n  // Verifica se a senha \xe9 uma string\\n  if (typeof password !== \'string\') return false;\\n\\n  // Verifica se a senha possui 8 caract\xe9res ou mais\\n  if (password.trim().length < 8) return false;\\n\\n  // Verifica se a senha possui ao menos uma letra mai\xfascula\\n  if (!/[A-Z]/.test(password)) return false;\\n\\n  // Verifica se a senha possui ao menos uma letra min\xfascula\\n  if (!/[a-z]/.test(password)) return false;\\n\\n  // Verifica se a senha possui ao menos um n\xfamero\\n  if (!/[0-9]/.test(password)) return false;\\n\\n  // Retorna verdadeiro se todas as valida\xe7\xf5es acima passarem\\n  return true;\\n};\\n```\\n\\n> Visando manter o exemplo simples, n\xe3o vamos ir muito al\xe9m disso \ud83e\uddd9\ud83c\udffb\\n\\n- N\xe3o use essa fun\xe7\xe3o para c\xf3digos reais, o intuito \xe9 ser simples para focar no apredizado \ud83e\uddd1\ud83c\udffb\u200d\ud83c\udf93\\n- Voc\xea pode trocar de **src/validations.mjs** para **src/validations.js** usando o `\\"type\\": \\"module\\"` no seu arquivo **package.json** \ud83e\uddd9\ud83c\udffb\\n\\n<hr />\\n\\n## \ud83e\uddd1\ud83c\udffb\u200d\ud83d\udd2c Entendendo os Testes\\n\\nTeoricamente, nossa fun\xe7\xe3o do projeto j\xe1 funciona, esse \xe9 o momento que a gente come\xe7a fazer v\xe1rios `console.log`, certo? **Nada disso** \ud83d\ude02\\n\\nVamos tornar o que seriam esses _\\"console logs\\"_, em testes automatizados que sempre ser\xe3o executados quando o projeto passar por uma altera\xe7\xe3o \ud83d\ude80\\n\\nComo? Usando asser\xe7\xf5es \ud83d\udc47\ud83c\udffb\\n\\n<hr />\\n\\n### \u2611\ufe0f O que s\xe3o Asser\xe7\xf5es?\\n\\nNos testes, **asser\xe7\xf5es** s\xe3o usadas para garantir que um resultado \xe9 realmente o que a gente espera.\\n\\nCada _tester_ pode ter uma forma diferente de fazer isso, mas o final costuma ser o mesmo:\\n\\n- Se nossa verifica\xe7\xe3o (asser\xe7\xe3o) n\xe3o for exatamente como o esperado, o teste ir\xe1 disparar um erro nessa asser\xe7\xe3o.\\n\\n#### \ud83d\udcdd Exemplo:\\n\\nImagine que `1 + 1` precisa retornar `2`, mas retornou `\\"11\\"`.\\n\\nQuando chegar na asser\xe7\xe3o que espera o resultado `2`, ela ir\xe1 disparar um erro no teste dizendo que esperava `2` (n\xfamero), mas recebeu `\\"11\\"` (_string_):\\n\\n```js\\nimport { assert } from \'poku\';\\n\\nassert.strictEqual(\'1\' + \'1\', 2, \'1+1 deve retornar 2\');\\n```\\n\\n<img\\n  loading=\'lazy\'\\n  width=\'474\'\\n  alt=\'Erro de asser\xe7\xe3o\'\\n  src=\'https://github.com/wellwelwel/poku/assets/46850407/f1dc1e18-7f9b-4ccb-880c-b0845464925f\'\\n/>\\n\\n- `actual`:\\n  - _\\"11\\"_ \u2014 \xc9 o retorno din\xe2mico (_soft code_) da nossa fun\xe7\xe3o ou vari\xe1vel\\n- `expected`:\\n  - _2_ \u2014 \xe9 o valor bruto (_hard code_) que deve ser retornado pelo `actual`\\n\\n> Tanto o [**Poku**](https://github.com/wellwelwel/poku) como o pr\xf3prio **Node.js** possuem o m\xe9todo `assert` com a forma de uso exatamente iguais \ud83e\uddd9\ud83c\udffb\\n>\\n> Quanto ao funcionamento, o [**Poku**](https://github.com/wellwelwel/poku) oferece uma forma simples e inteligente de executar m\xfaltiplos arquivos e descreve todas as asser\xe7\xf5es que passaram ou n\xe3o no terminal \ud83d\udc37\\n\\n#### \ud83d\udcdd Corrigindo nosso exemplo:\\n\\n```js\\nimport { assert } from \'poku\';\\n\\nassert.strictEqual(1 + 1, 2, \'1+1 deve retornar 2\');\\n```\\n\\n<img\\n  loading=\'lazy\'\\n  width=\'474\'\\n  alt=\'Asser\xe7\xe3o com sucesso\'\\n  src=\'https://github.com/wellwelwel/poku/assets/46850407/430a72eb-8d34-45f4-abc7-2f2f92e3dd8e\'\\n/>\\n\\n<hr />\\n\\n## \ud83e\uddea Criando os Testes\\n\\n> Finalmente a parte boa \ud83c\udf89\\n\\nPara isso, vamos usar a criatividade e gerar:\\n\\n- \u274c V\xe1rias senhas inv\xe1lidas para simular o comportamento tanto de usu\xe1rios usuais, como de usu\xe1rios mal intencionados\\n  - Nas senhas inv\xe1lidas, n\xf3s esperamos (`expected`) que o resultado (`actual`) seja `false`.\\n- \u2705 Senhas v\xe1lidas para garantir que nossa fun\xe7\xe3o entende que a senha deve ser v\xe1lida quando passar por todos os crit\xe9rios\\n  - Nas senhas v\xe1lidas, n\xf3s esperamos (`expected`) que o resultado (`actual`) seja `true`.\\n- \ud83d\udcdd Nada de coment\xe1rios no teste, vamos descrever o que \xe9 cada um na pr\xf3pria asser\xe7\xe3o (`message`)\\n\\nVamos criar nosso arquivo de teste:\\n\\n- **test/password.test.mjs**\\n\\n```js\\nimport { assert } from \'poku\';\\nimport { validatePassword } from \'../src/validations.mjs\';\\n\\nassert.strictEqual(\\n  validatePassword(),\\n  false,\\n  \'Valida se a senha n\xe3o for passada\'\\n);\\n\\nassert.strictEqual(\\n  validatePassword(12345678),\\n  false,\\n  \'Valida se a senha n\xe3o for uma string\'\\n);\\n\\nassert.strictEqual(\\n  validatePassword(\'\'),\\n  false,\\n  \'Valida se a senha for uma string vazia\'\\n);\\n\\nassert.strictEqual(\\n  validatePassword(\'abcd1234\'),\\n  false,\\n  \'Valida se a senha n\xe3o possuir ao menos uma letra mai\xfascula\'\\n);\\n\\nassert.strictEqual(\\n  validatePassword(\'1234EFGH\'),\\n  false,\\n  \'Valida se a senha n\xe3o possuir ao menos uma letra min\xfascula\'\\n);\\n\\nassert.strictEqual(\\n  validatePassword(\'abcdEFGH\'),\\n  false,\\n  \'Valida se a senha n\xe3o possuir ao menos um n\xfamero\'\\n);\\n\\nassert.strictEqual(\\n  validatePassword(\'abcdEF12\'),\\n  true,\\n  \'Valida se a senha for v\xe1lida\'\\n);\\n```\\n\\n- Voc\xea pode trocar de **test/password.test.mjs** para **test/password.test.js** usando o `\\"type\\": \\"module\\"` no seu arquivo **package.json** \ud83e\uddd9\ud83c\udffb\\n\\n<hr />\\n\\n## \ud83d\udd2c Verificando se os Testes Passaram\\n\\n```bash\\nnpx poku\\n```\\n\\n- Ao executar o comando `npx poku`, por padr\xe3o, o _tester_ ir\xe1 procurar por todos os arquivos com a exten\xe7\xe3o `*.test.*` ou `*.spec.*` no diret\xf3rio em que o comando foi executado \ud83e\uddd9\ud83c\udffb\\n\\nE finalmente, nosso resultado:\\n\\n<img\\n  loading=\'lazy\'\\n  width=\'522\'\\n  alt=\'Exemplo de Sucesso com o Poku\'\\n  src=\'https://github.com/wellwelwel/poku/assets/46850407/f06105a3-f956-473f-b456-26c1e27d80db\'\\n/>\\n\\n- A primeira sa\xedda mostra em qual diret\xf3rio o [**Poku**](https://github.com/wellwelwel/poku) est\xe1 procurando por testes\\n- A segunda sa\xedda mostra o arquivo que est\xe1 sendo testado no momento\\n  - Dentro de cada arquivo de teste, ele ir\xe1 mostrar todas as asser\xe7\xf5es que possu\xedrem uma mensagem\\n  - Ao finalizar, seja com sucesso ou erro, ele ir\xe1 mostrar o comando que ele executou para o arquivo testado:\\n    - `node test/password.test.mjs`\\n- Quando todos os arquivos de testes terminarem, ele ir\xe1 mostrar um resumo de quantos arquivos passaram e/ou falharam\\n- No final, o c\xf3digo de sa\xedda ser\xe1:\\n  - \u2705 `0` para sucesso\\n  - \u274c `1` para falha\\n\\n<hr />\\n\\n## \ud83d\udcad Conclus\xe3o\\n\\nCom os **testes unit\xe1rios** que criamos, n\xf3s garantimos n\xe3o s\xf3 que nossa fun\xe7\xe3o funcione como deveria, como inclusive prevemos como nosso projeto reage em situa\xe7\xf5es at\xedpicas antes que elas aconte\xe7am \ud83d\udd10\\n\\n> Espero ter te provado que **testes** podem sim (!) ser **simples** \ud83e\uddd1\ud83c\udffb\u200d\ud83c\udf93\\n\\n<hr />\\n\\n- Essa foi minha primeira \\"aula\\" em formato de _blog_. Feedbacks s\xe3o sempre bem vindos \ud83e\ude75\\n- Muitos termos s\xe3o explicados repetidamente em momentos diferentes, isso \xe9 uma escolha did\xe1tica, mas podem falar caso tenha ficado cansativo \ud83e\uddd1\ud83c\udffb\u200d\ud83c\udf93\\n\\n:::info\\nEsse artigo foi postado icialmente no [TabNews](https://www.tabnews.com.br/wellwelwel/tutorial-introduzindo-testes-unitarios-para-devs-iniciantes-js).\\n:::\\n","filePath":"article.mdx","mdxPath":"/home/runner/work/weslley.io/weslley.io/i18n/pt-BR/articles/2024/01/article.mdx","summary":[{"text":"\ud83e\uddd1\ud83c\udffb\u200d\ud83c\udf93 Introdu\xe7\xe3o ao Mundo dos Testes","level":2,"items":[]},{"text":"\ud83d\udcda Escolhendo o _Tester_","level":2,"items":[{"text":"\ud83d\udce6 Instalando nosso **_Tester_**","level":3,"items":[]}]},{"text":"\ud83e\uddea Por que \\"Unit\xe1rios\\"?","level":2,"items":[]},{"text":"\ud83d\udccb Criando um Projeto Simples","level":2,"items":[]},{"text":"\ud83e\uddd1\ud83c\udffb\u200d\ud83d\udd2c Entendendo os Testes","level":2,"items":[{"text":"\u2611\ufe0f O que s\xe3o Asser\xe7\xf5es?","level":3,"items":[{"text":"\ud83d\udcdd Exemplo:","level":4,"items":[]},{"text":"\ud83d\udcdd Corrigindo nosso exemplo:","level":4,"items":[]}]}]},{"text":"\ud83e\uddea Criando os Testes","level":2,"items":[]},{"text":"\ud83d\udd2c Verificando se os Testes Passaram","level":2,"items":[]},{"text":"\ud83d\udcad Conclus\xe3o","level":2,"items":[]}],"description":"Se voc\xea \xe9 um desenvolvedor iniciante (_ou n\xe3o_), eu quero te mostrar que testes podem sim ser simples e que a complexidade s\xf3 vem conforme nossa pr\xf3pria necessidade, n\xe3o do _tester_.","social":"./banner.png","socialPath":"/home/runner/work/weslley.io/weslley.io/i18n/pt-BR/articles/2024/01/banner.png","readingTime":6,"lastModified":"2025-12-25T22:17:01.000Z","authorsData":[{"name":"Weslley Ara\xfajo","title":"Desenvolvedor ativo no ecossistema open source, Microsoft MVP, mantenedor do MySQL2 e criador do Poku \u2728","url":"https://weslley.io","image_url":"/img/avatar.png","socials":{"linkedin":"wellwelwel","github":"wellwelwel","instagram":"wellwelwel","youtube":"weslleyio"}}],"nextArticle":{"title":"Prevenindo o envio de emails maliciosos atrav\xe9s do seu dom\xednio","slug":"prevenindo-o-envio-de-emails-maliciosos-atraves-do-seu-dominio","description":"Sabia que pessoas mal intencionadas podem estar usando seu dom\xednio para enviar e-mails falsos?","social":"/home/runner/work/weslley.io/weslley.io/i18n/pt-BR/articles/2024/02/banner.png"},"route":"articles"}')}}]);