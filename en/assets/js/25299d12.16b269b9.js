/*! For license information please see 25299d12.16b269b9.js.LICENSE.txt */
"use strict";(self.webpackChunkweslley_io=self.webpackChunkweslley_io||[]).push([[1713],{688:function(e,i,n){n.d(i,{m:function(){return a}});var o=n(6540),s=n(2441),t=n(4848),a=function(e){var i=e.id,n=e.children,a=(0,o.useContext)(s.N_);if(!a)return(0,t.jsx)(t.Fragment,{children:n});var r=a.activeId,l=a.defaultId,d=null!=r?r:l;return d&&d!==i?null:(0,t.jsx)(t.Fragment,{children:n})}},981:function(e,i,n){n.r(i),n.d(i,{contentTitle:function(){return r},default:function(){return c},frontMatter:function(){return a},toc:function(){return l}});var o=n(4848),s=n(8453),t=(n(8374),n(688));const a={title:"Preventing malicious emails from being sent through your domain",slug:"prevenindo-o-envio-de-emails-maliciosos-atraves-do-seu-dominio",date:new Date("2024-06-10T00:00:00.000Z"),authors:["Weslley Ara\xfajo"],tags:["Security","DNS","Email","SPF","DKIM","DMARC","MX"],social:"./banner.png",sides:[{id:"developer",label:"I'm a Developer",description:"Learn how to configure your domain securely against Email Spoofing."},{id:"user",label:"I'm an E-mail User",description:'Learn how to protect yourself from fake emails coming from "real" senders.'}]},r=void 0,l=[{value:"Possible Negative Impacts \ud83d\udc7e",id:"possible-negative-impacts-",level:2},{value:"How to Protect Yourself? \ud83e\udd1d",id:"how-to-protect-yourself-",level:2},{value:"DNS",id:"dns",level:3},{value:"MX (Mail Exchange)",id:"mx-mail-exchange",level:3},{value:"SPF",id:"spf",level:3},{value:"Tip:",id:"tip",level:4},{value:"DKIM",id:"dkim",level:3},{value:"DMARC",id:"dmarc",level:3},{value:"Free Solutions and Alternatives \ud83c\udf1f",id:"free-solutions-and-alternatives-",level:2},{value:"But how can someone use a domain without authorization? \ud83e\udd28",id:"but-how-can-someone-use-a-domain-without-authorization-",level:2},{value:"How to protect yourself as a user? \ud83d\udd10",id:"how-to-protect-yourself-as-a-user-",level:2}];function d(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.p,{children:"Did you know that malicious people could be using your domain to send spoof emails?"}),"\n","\n","\n",(0,o.jsxs)(t.m,{id:"developer",children:[(0,o.jsx)(i.p,{children:"This technique is known as Email Spoofing and exploits the lack of authentication when sending emails from a domain, forging the sender so messages appear to come from a trusted domain."}),(0,o.jsx)(i.p,{children:"Both small and large companies can be targeted, as well as personal or abandoned sites. The intent can range from harvesting sensitive data to infecting users' devices \u2014 all using valid domains without authorization."}),(0,o.jsx)(i.p,{children:"Reasons vary, but here are some very common causes that make this vulnerability possible:"}),(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Lack of knowledge or outright negligence."}),"\n",(0,o.jsx)(i.li,{children:"The domain provider requires a separate paid plan for email that the user isn't willing to buy."}),"\n"]}),(0,o.jsx)("hr",{}),(0,o.jsx)(i.h2,{id:"possible-negative-impacts-",children:"Possible Negative Impacts \ud83d\udc7e"}),(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Loss of credibility."}),"\n",(0,o.jsx)(i.li,{children:"Blocking by email providers (where even your legitimate messages may be marked as spam or never reach recipients)."}),"\n",(0,o.jsx)(i.li,{children:"Loss of the domain (complaints, legal actions, or severe reputation damage)."}),"\n"]}),(0,o.jsx)("hr",{}),(0,o.jsx)(i.h2,{id:"how-to-protect-yourself-",children:"How to Protect Yourself? \ud83e\udd1d"}),(0,o.jsx)(i.p,{children:"In this article I'll cover SPF, DKIM, and DMARC to protect your domain and help prevent malicious actors from sending unauthorized messages on your behalf."}),(0,o.jsx)(i.h3,{id:"dns",children:"DNS"}),(0,o.jsx)(i.p,{children:"DNS is where you configure records related to your domain, such as subdomains, redirects, and email sending and receiving."}),(0,o.jsx)(i.p,{children:"When buying a domain, users often focus on the hosting IP. That's where a common problem lives: once the domain appears to be working, the user may assume the job is done."}),(0,o.jsx)(i.p,{children:"With that said, let's review the main email-related records:"}),(0,o.jsx)(i.h3,{id:"mx-mail-exchange",children:"MX (Mail Exchange)"}),(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.strong,{children:"MX"})," record is responsible for receiving emails, directing messages for your domain to the server that handles incoming mail (for example, ",(0,o.jsx)(i.strong,{children:"Google Workspace"}),", ",(0,o.jsx)(i.strong,{children:"Zoho"}),")."]}),(0,o.jsx)(i.p,{children:"Without it, emails sent to you will never reach your inbox."}),(0,o.jsx)(i.h3,{id:"spf",children:"SPF"}),(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.strong,{children:"SPF"})," record specifies which servers are authorized to send emails on behalf of your domain, helping to prevent malicious actors from using your domain."]}),(0,o.jsxs)(i.p,{children:["It's especially important against Email Spoofing and is commonly ended with the ",(0,o.jsx)(i.code,{children:"~all"})," mechanism."]}),(0,o.jsx)(i.h4,{id:"tip",children:"Tip:"}),(0,o.jsxs)(i.p,{children:["While most mail servers recommend ",(0,o.jsx)(i.code,{children:"~all"})," for flexibility, if your domain has been a victim of Email Spoofing or you want stricter protection, you can use ",(0,o.jsx)(i.code,{children:"-all"})," to strictly reject unauthorized senders. Note this increases DNS configuration complexity and requires manual updates whenever you add new email services."]}),(0,o.jsx)(i.h3,{id:"dkim",children:"DKIM"}),(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.strong,{children:"DKIM"})," record adds a digital signature to emails sent from your domain, allowing the receiving server to verify the message truly came from you and wasn't tampered with in transit. It's an essential complement to ",(0,o.jsx)(i.strong,{children:"SPF"}),"."]}),(0,o.jsx)(i.p,{children:"This helps protect your domain's reputation and the recipients, and it can indirectly reduce the chance of your emails being flagged as spam."}),(0,o.jsx)(i.h3,{id:"dmarc",children:"DMARC"}),(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.strong,{children:"DMARC"})," record lets you define how mail servers should handle messages that fail SPF or DKIM checks, and it provides detailed reports about unauthorized attempts to use your domain, enabling you to monitor abuse."]}),(0,o.jsx)("hr",{}),(0,o.jsx)(i.h2,{id:"free-solutions-and-alternatives-",children:"Free Solutions and Alternatives \ud83c\udf1f"}),(0,o.jsx)(i.p,{children:"If your provider doesn't offer email hosting or you don't want to pay for a plan, you can use Cloudflare's free Email Routing to forward your domain's emails to another address (for example, a personal Gmail)."}),(0,o.jsx)(i.p,{children:"Zoho can also be a good alternative \u2014 it lets you host your domain's email with a dedicated dashboard without forwarding, though the free tier has some limitations."}),(0,o.jsx)(i.p,{children:"\u2014 Enjoyed learning a bit more about security? \ud83d\udd10"}),(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsx)(i.p,{children:"This article is not sponsored; these are suggestions I use both personally and professionally \ud83d\ude4b\ud83c\udffb"})}),(0,o.jsx)(i.admonition,{type:"info",children:(0,o.jsxs)(i.p,{children:["This article was originally posted on ",(0,o.jsx)(i.a,{href:"https://www.linkedin.com/pulse/e-mail-spoofing-prevenindo-o-envio-de-emails-atrav%25C3%25A9s-do-ara%25C3%25BAjo-ff2xc/",children:"LinkedIn"}),"."]})})]}),"\n",(0,o.jsxs)(t.m,{id:"user",children:[(0,o.jsx)(i.p,{children:"Have you ever received fake emails that appear to come from real accounts? Learn why configuring your site's DNS matters and how to protect yourself both as a user and as a developer \ud83d\udce8\ud83c\udfa3"}),(0,o.jsx)(i.p,{children:"I constantly receive malicious emails, and the ones that stand out most are those coming from valid domains of real (and reputable) companies."}),(0,o.jsx)(i.h2,{id:"but-how-can-someone-use-a-domain-without-authorization-",children:"But how can someone use a domain without authorization? \ud83e\udd28"}),(0,o.jsx)(i.p,{children:'This technique is known as "Email Spoofing" and is covered in more detail in the article; this post focuses on how we can protect ourselves as users.'}),(0,o.jsx)(i.p,{children:"\ud83e\uddd1\ud83c\udffb\u200d\ud83d\udd2c Let's go:"}),(0,o.jsx)(i.p,{children:"One email in particular caught my attention because the domain used belonged to one of the country's top 10 companies. I opened it in a controlled environment \u2014 and as a reminder, an incognito browser tab is not a controlled environment \ud83e\uddd9\ud83c\udffb\u200d\u2642\ufe0f"}),(0,o.jsx)(i.p,{children:'I thought it would be "just" a fake login page, but there were multiple redirects and permission prompts in the browser before reaching the login screen \ud83c\udfa3'}),(0,o.jsx)(i.p,{children:"These redirects can be used to steal cookies or request camera and microphone permissions without our consent."}),(0,o.jsx)(i.p,{children:"Because the email appears to come from a domain we trust, it can lead us to click links, accept permissions (which browsers may have enabled by default), or even enter credentials on a fake site."}),(0,o.jsx)(i.h2,{id:"how-to-protect-yourself-as-a-user-",children:"How to protect yourself as a user? \ud83d\udd10"}),(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Be suspicious of emails offering something you didn't request, regardless of the sender."}),"\n",(0,o.jsx)(i.li,{children:"Check whether the domain makes sense for the message \u2014 for example, if you receive a bill supposedly from a company but the domain comes from elsewhere (even if it's real)."}),"\n",(0,o.jsx)(i.li,{children:"Prefer using a computer instead of a phone to open links, so you can hover over the link to see the real destination before clicking."}),"\n",(0,o.jsx)(i.li,{children:"Does the link start with the expected site but include an @? Be careful \u2014 this can be URL obfuscation, which hides the real destination."}),"\n",(0,o.jsx)(i.li,{children:"Is there an attachment in the email? Never download or open it, no matter how curious the message makes you."}),"\n",(0,o.jsx)(i.li,{children:"If in doubt, contact the company's official channels (not the ones listed in the email)."}),"\n"]}),(0,o.jsx)(i.p,{children:"When a company's domain is used for these purposes, it's worth noting the company is also a victim \u2014 but that doesn't mean it's free from responsibility. That brings us to the next topic:"}),(0,o.jsx)(i.p,{children:"\u2014 Enjoyed learning a bit more about security? \ud83d\udd10"})]})]})}function c(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},2441:function(e,i,n){n.d(i,{FR:function(){return a},N_:function(){return t}});var o=n(6540),s=n(4848),t=(0,o.createContext)(null),a=function(e){var i=e.children,n=(0,o.useState)(null),a=n[0],r=n[1],l=(0,o.useState)(null),d=l[0],c=l[1];return(0,s.jsx)(t.Provider,{value:{activeId:a,setActiveId:r,defaultId:d,setDefaultId:c},children:i})}},8374:function(e,i,n){n.d(i,{a:function(){return f}});var o=n(6540),s=n(4586);const t=(0,n(4722).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var a="trigger_k7Gt",r="icon_Yg3C",l="overlay_pEKJ",d="modal_EAUz",c="header_APUb",h="title_oHWw",u="close_eUaZ",m="content_uNDV",p=n(4848),f=function(e){var i=e.trigger,n=e.title,f=e.children,g=(0,o.useState)(!1),v=g[0],x=g[1],y=(0,s.A)().i18n,j=(0,o.useCallback)(function(){return x(!0)},[]),b=(0,o.useCallback)(function(){return x(!1)},[]),w=y.currentLocale,k={clickToSeeMore:"en"===w?"Click to see more":"Clique para ver mais",closeModal:"en"===w?"Close modal":"Fechar modal"};return(0,o.useEffect)(function(){if(v){var e=function(e){"Escape"===e.key&&b()};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",function(){document.removeEventListener("keydown",e),document.body.style.overflow=""}}},[v,b]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("button",{type:"button",onClick:j,className:a,"aria-haspopup":"dialog","aria-expanded":v,title:k.clickToSeeMore,children:[i,(0,p.jsx)("span",{className:r,"aria-hidden":"true",children:(0,p.jsx)(t,{})})]}),v&&(0,p.jsx)("div",{className:l,onClick:b,role:"presentation","aria-hidden":"true",children:(0,p.jsxs)("div",{className:d,onClick:function(e){return e.stopPropagation()},role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,children:[(0,p.jsxs)("div",{className:c,children:[(0,p.jsx)("h2",{id:"modal-title",className:h,children:null!=n?n:i}),(0,p.jsx)("button",{type:"button",onClick:b,className:u,"aria-label":k.closeModal,children:"\u2715"})]}),(0,p.jsx)("div",{className:m,children:f})]})})]})}}}]);