/*! For license information please see 25299d12.d70ed147.js.LICENSE.txt */
"use strict";(self.webpackChunkweslley_io=self.webpackChunkweslley_io||[]).push([[1713],{2441:function(e,o,a){a.d(o,{FR:function(){return n},N_:function(){return r}});var s=a(6540),i=a(4848),r=(0,s.createContext)(null),n=function(e){var o=e.children,a=(0,s.useState)(null),n=a[0],d=a[1],l=(0,s.useState)(null),t=l[0],m=l[1];return(0,i.jsx)(r.Provider,{value:{activeId:n,setActiveId:d,defaultId:t,setDefaultId:m},children:o})}},4761:function(e,o,a){a.r(o),a.d(o,{contentTitle:function(){return t},default:function(){return u},frontMatter:function(){return l},toc:function(){return m}});var s=a(4848),i=a(8453),r=(a(8374),a(6540)),n=a(2441),d=function(e){var o=e.id,a=e.children,i=(0,r.useContext)(n.N_);if(!i)return(0,s.jsx)(s.Fragment,{children:a});var d=i.activeId,l=i.defaultId,t=null!=d?d:l;return t&&t!==o?null:(0,s.jsx)(s.Fragment,{children:a})};const l={title:"Preventing malicious emails from being sent through your domain",slug:"prevenindo-o-envio-de-emails-maliciosos-atraves-do-seu-dominio",date:new Date("2024-06-10T00:00:00.000Z"),authors:["Weslley Ara\xfajo"],tags:["Security","DNS","Email","SPF","DKIM","DMARC","MX"],social:"./banner.png",sides:[{id:"developer",label:"I'm a Developer",description:"Learn how to configure your domain securely against Email Spoofing."},{id:"user",label:"I'm an E-mail User",description:'Learn how to protect yourself from fake emails coming from "real" senders.'}]},t=void 0,m=[{value:"Poss\xedveis impactos negativos \ud83d\udc7e",id:"poss\xedveis-impactos-negativos-",level:2},{value:"Como se proteger? \ud83e\udd1d",id:"como-se-proteger-",level:2},{value:"DNS",id:"dns",level:3},{value:"MX (Mail Exchange)",id:"mx-mail-exchange",level:3},{value:"SPF",id:"spf",level:3},{value:"Dica:",id:"dica",level:4},{value:"DKIM",id:"dkim",level:3},{value:"DMARC",id:"dmarc",level:3},{value:"Solu\xe7\xf5es e alternativas gratuitas \ud83c\udf1f",id:"solu\xe7\xf5es-e-alternativas-gratuitas-",level:2},{value:"Mas como algu\xe9m pode usar um dom\xednio sem autoriza\xe7\xe3o? \ud83e\udd28",id:"mas-como-algu\xe9m-pode-usar-um-dom\xednio-sem-autoriza\xe7\xe3o-",level:2},{value:"Como se previnir como usu\xe1rio? \ud83d\udd10",id:"como-se-previnir-como-usu\xe1rio-",level:2}];function c(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Did you know that malicious people could be using your domain to send spoof emails?"}),"\n","\n","\n",(0,s.jsxs)(d,{id:"developer",children:[(0,s.jsx)(o.p,{children:"Essa t\xe9cnica \xe9 conhecida como E-mail Spoofing e explora a falta de autentica\xe7\xe3o no envio de e-mails de um dom\xednio, falsificando o remetente e fazendo parecer que a mensagem foi enviada por um dom\xednio confi\xe1vel."}),(0,s.jsx)(o.p,{children:"Tanto empresas pequenas e grandes podem ser alvos, assim como sites pessoais ou abandonados, onde o intuito pode variar desde capturar dados sens\xedveis e at\xe9 infectar dispositivos dos usu\xe1rios. Tudo isso, usando dom\xednios v\xe1lidos sem autoriza\xe7\xe3o."}),(0,s.jsx)(o.p,{children:"Os motivos podem variar, mas vou citar alguns super comuns que tornam essa vulnerabilidade poss\xedvel:"}),(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Falta de conhecimento ou at\xe9 mesmo neglig\xeancia."}),"\n",(0,s.jsx)(o.li,{children:"O provedor do dom\xednio exige um plano pago \xe0 parte para e-mails que o usu\xe1rio n\xe3o est\xe1 disposto a adquirir."}),"\n"]}),(0,s.jsx)("hr",{}),(0,s.jsx)(o.h2,{id:"poss\xedveis-impactos-negativos-",children:"Poss\xedveis impactos negativos \ud83d\udc7e"}),(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Perda de credibilidade."}),"\n",(0,s.jsx)(o.li,{children:"Bloqueio por provedores de e-mail (onde at\xe9 mesmo seus e-mails v\xe1lidos podem ser afetados ao serem entregues como spam ou nem mesmo chegarem ao destinat\xe1rio)."}),"\n",(0,s.jsx)(o.li,{children:"Perda do dom\xednio (den\xfancias, medidas legais ou at\xe9 mesmo pela reputa\xe7\xe3o muito prejudicada)."}),"\n"]}),(0,s.jsx)("hr",{}),(0,s.jsx)(o.h2,{id:"como-se-proteger-",children:"Como se proteger? \ud83e\udd1d"}),(0,s.jsx)(o.p,{children:"Nesse artigo, vou abordar t\xf3picos como SPF, DKIM e DMARC para proteger seu dom\xednio e evitar que pessoas maliciosas consigam acesso n\xe3o autorizado ao seu dom\xednio."}),(0,s.jsx)(o.h3,{id:"dns",children:"DNS"}),(0,s.jsxs)(o.p,{children:["O ",(0,s.jsx)(o.strong,{children:"DNS"})," \xe9 onde voc\xea configura os registros relacionados ao seu dom\xednio, como subdom\xednios, redirecionamentos, envio e recebimento de e-mails, entre outros."]}),(0,s.jsx)(o.p,{children:"Ao comprar um dom\xednio, \xe9 comum usu\xe1rios se preocuparem especialmente com o IP da hospedagem. Aqui \xe9 onde mora um dos problemas, pois ao notar que o dom\xednio j\xe1 est\xe1 funcionando, o usu\xe1rio pode considerar que o trabalho j\xe1 est\xe1 completo."}),(0,s.jsx)(o.p,{children:"Dito isso, vamos conhecer os principais registros relacionados ao e-mail:"}),(0,s.jsx)(o.h3,{id:"mx-mail-exchange",children:"MX (Mail Exchange)"}),(0,s.jsxs)(o.p,{children:["O registro ",(0,s.jsx)(o.strong,{children:"MX"})," \xe9 o respons\xe1vel por voc\xea receber os e-mails, direcionando-os do seu dom\xednio para o servidor respons\xe1vel por receb\xea-los (",(0,s.jsx)(o.strong,{children:"Google Workspace"}),", ",(0,s.jsx)(o.strong,{children:"Zoho"}),", etc.)."]}),(0,s.jsx)(o.p,{children:"Sem ele, os e-mails que te enviarem nunca chegar\xe3o at\xe9 voc\xea."}),(0,s.jsx)(o.h3,{id:"spf",children:"SPF"}),(0,s.jsxs)(o.p,{children:["O registro ",(0,s.jsx)(o.strong,{children:"SPF"})," \xe9 uma forma de dizer quais servidores est\xe3o autorizados a enviar e-mails em nome do seu dom\xednio, ajudando a evitar que pessoas mal intencionadas usem seu dom\xednio."]}),(0,s.jsxs)(o.p,{children:["Ele \xe9 especialmente importante contra o E-mail Spoofing, sendo geralmente refor\xe7ado pelo par\xe2metro ",(0,s.jsx)(o.code,{children:"~all"}),"."]}),(0,s.jsx)(o.h4,{id:"dica",children:"Dica:"}),(0,s.jsxs)(o.p,{children:["Enquanto a maioria dos servidores de e-mail sugerem ",(0,s.jsx)(o.code,{children:"~all"})," devido \xe0 flexibilidade, se seu dom\xednio j\xe1 foi v\xedtima de ",(0,s.jsx)(o.strong,{children:"E-mail Spoofing"})," ou voc\xea quer refor\xe7ar ainda mais sua seguran\xe7a, voc\xea pode usar ",(0,s.jsx)(o.code,{children:"-all"})," para eliminar a possibilidade de aceita\xe7\xe3o por baixa prioridade de forma estrita, mas note que isso implica na complexidade das configura\xe7\xf5es do ",(0,s.jsx)(o.strong,{children:"DNS"}),", exigindo atualiza\xe7\xf5es manuais sempre que novos servi\xe7os de e-mail forem integrados ao seu dom\xednio."]}),(0,s.jsx)(o.h3,{id:"dkim",children:"DKIM"}),(0,s.jsxs)(o.p,{children:["O registro ",(0,s.jsx)(o.strong,{children:"DKIM"})," adiciona uma assinatura digital aos e-mails enviados pelo seu dom\xednio, permitindo que o servidor que recebe o seu e-mail verifique se a mensagem foi realmente enviada por voc\xea e n\xe3o foi alterada no caminho, sendo uma ferramenta complementar essencial ao ",(0,s.jsx)(o.strong,{children:"SPF"}),"."]}),(0,s.jsx)(o.p,{children:"Isso ajuda a proteger tanto a reputa\xe7\xe3o do seu dom\xednio quanto os destinat\xe1rios, al\xe9m de indiretamente evitar que seus e-mails sejam entregues como spam."}),(0,s.jsx)(o.h3,{id:"dmarc",children:"DMARC"}),(0,s.jsxs)(o.p,{children:["O registro ",(0,s.jsx)(o.strong,{children:"DMARC"})," permite que voc\xea defina como os servidores de e-mail devem tratar mensagens que falharem na valida\xe7\xe3o do SPF e do DKIM, fornecendo relat\xf3rios detalhados sobre tentativas indevidas usando seu dom\xednio, permitindo monitorar poss\xedveis abusos."]}),(0,s.jsx)("hr",{}),(0,s.jsx)(o.h2,{id:"solu\xe7\xf5es-e-alternativas-gratuitas-",children:"Solu\xe7\xf5es e alternativas gratuitas \ud83c\udf1f"}),(0,s.jsx)(o.p,{children:"Se seu provedor n\xe3o possui um servidor de e-mails ou voc\xea n\xe3o pretende usar um plano pago para isso, voc\xea pode usar gratuitamente o DNS com o roteamento de e-mails da Cloudflare, redirecionando os e-mails do seu dom\xednio para outro e-mail (por exemplo, um e-mail pessoal do Gmail)."}),(0,s.jsx)(o.p,{children:"O Zoho tamb\xe9m pode ser uma boa alternativa, n\xe3o sendo necess\xe1rio redirecionar seus e-mails e oferecendo um dashboard pr\xf3prio para os e-mails do seu dom\xednio, mas ele possui limita\xe7\xf5es de recurso em sua vers\xe3o gratuita."}),(0,s.jsx)(o.p,{children:"\u2014 Curtiu aprender um pouco mais sobre seguran\xe7a? \ud83d\udd10"}),(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsx)(o.p,{children:"Esse artigo n\xe3o possui nenhum tipo de patroc\xednio e essas s\xe3o sugest\xf5es que uso tanto pessoalmente, como profissionalmente \ud83d\ude4b\ud83c\udffb"})}),(0,s.jsx)(o.admonition,{type:"info",children:(0,s.jsxs)(o.p,{children:["Esse artigo foi postado icialmente no ",(0,s.jsx)(o.a,{href:"https://www.linkedin.com/pulse/e-mail-spoofing-prevenindo-o-envio-de-emails-atrav%25C3%25A9s-do-ara%25C3%25BAjo-ff2xc/",children:"LinkedIn"}),"."]})})]}),"\n",(0,s.jsxs)(d,{id:"user",children:[(0,s.jsx)(o.p,{children:"J\xe1 recebeu e-mails falsos vindos de contas reais? Vem entender a import\xe2ncia de configurar o DNS do seu site e como se proteger tanto como usu\xe1rio, como desenvolvedor \ud83d\udce8\ud83c\udfa3"}),(0,s.jsx)(o.p,{children:"Constantemente recebo e-mails maliciosos e os que mais me chamam aten\xe7\xe3o, s\xe3o os que v\xeam de dom\xednios v\xe1lidos de empresas reais (e s\xe9rias)."}),(0,s.jsx)(o.h2,{id:"mas-como-algu\xe9m-pode-usar-um-dom\xednio-sem-autoriza\xe7\xe3o-",children:"Mas como algu\xe9m pode usar um dom\xednio sem autoriza\xe7\xe3o? \ud83e\udd28"}),(0,s.jsx)(o.p,{children:'Essa t\xe9cnica \xe9 conhecida como "E-mail Spoofing" e \xe9 abordada com mais detalhes no artigo, enquanto essa publica\xe7\xe3o \xe9 focada em nos protegermos como usu\xe1rios.'}),(0,s.jsx)(o.p,{children:"\ud83e\uddd1\ud83c\udffb\u200d\ud83d\udd2c Vamos l\xe1:"}),(0,s.jsx)(o.p,{children:"Um e-mail em especial me deixou curioso, pois o dom\xednio que foi usado \xe9 de uma das 10 maiores empresas do pa\xeds. Decidi abrir em um ambiente controlado e, s\xf3 para lembrar, aba an\xf4nima de navegador n\xe3o \xe9 ambiente controlado \ud83e\uddd9\ud83c\udffb\u200d\u2642\ufe0f"}),(0,s.jsx)(o.p,{children:'Imaginei que seria "apenas" uma p\xe1gina de login falsa, mas foram feitos v\xe1rios redirecionamentos e pedidos de permiss\xf5es no navegador, para s\xf3 ent\xe3o chegar na tela de login \ud83c\udfa3'}),(0,s.jsx)(o.p,{children:"Esses redirecionamentos podem ser usados, por exemplo, para roubar cookies ou acessar permiss\xf5es de c\xe2mera e microfone sem o nosso consentimento."}),(0,s.jsx)(o.p,{children:"O fato do e-mail vir de um dom\xednio que n\xf3s confiamos, pode nos induzir desde a clicar, aceitar permiss\xf5es (que navegadores podem inclusive j\xe1 ter como ativadas por padr\xe3o) e at\xe9 a inserir nossas credenciais em um site falso."}),(0,s.jsx)(o.h2,{id:"como-se-previnir-como-usu\xe1rio-",children:"Como se previnir como usu\xe1rio? \ud83d\udd10"}),(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Suspeite de e-mails que oferecem algo que voc\xea n\xe3o solicitou, independente do remetente."}),"\n",(0,s.jsx)(o.li,{children:"Verifique se o dom\xednio faz sentido com o que foi recebido, por exemplo, ao receber cobran\xe7as de uma empresa, mas o dom\xednio veio de outra (mesmo que real)."}),"\n",(0,s.jsx)(o.li,{children:"Prefira usar o computador ao inv\xe9s do celular para abrir links, onde voc\xea pode passar o mouse por cima do link sem clicar e verificar se o destino realmente leva para o site que voc\xea espera."}),"\n",(0,s.jsx)(o.li,{children:"O link come\xe7a com o site esperado, mas possui um @? Cuidado, isso pode ser outra t\xe9cnica chamada URL Obfuscation, que consiste em mascarar o verdadeiro destino do link."}),"\n",(0,s.jsx)(o.li,{children:"Tem algum arquivo anexo nesse e-mail? Jamais baixe ou abra, por mais curioso que o e-mail te deixe."}),"\n",(0,s.jsx)(o.li,{children:"Na d\xfavida, entre em contato com os canais oficiais da empresa (e n\xe3o os que constam no e-mail)."}),"\n"]}),(0,s.jsx)(o.p,{children:"Quando o dom\xednio de uma empresa \xe9 usado para esses fins, \xe9 interessante notar que a empresa tamb\xe9m \xe9 uma v\xedtima, mas isso n\xe3o significa que ela est\xe1 isenta de responsabilidade. O que nos leva ao pr\xf3ximo t\xf3pico:"}),(0,s.jsx)(o.p,{children:"\u2014 Curtiu aprender um pouco mais sobre seguran\xe7a? \ud83d\udd10"})]})]})}function u(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8374:function(e,o,a){a.d(o,{a:function(){return h}});var s=a(6540),i=a(4586);const r=(0,a(4722).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var n="trigger_k7Gt",d="icon_Yg3C",l="overlay_pEKJ",t="modal_EAUz",m="header_APUb",c="title_oHWw",u="close_eUaZ",p="content_uNDV",v=a(4848),h=function(e){var o=e.trigger,a=e.title,h=e.children,g=(0,s.useState)(!1),x=g[0],f=g[1],j=(0,i.A)().i18n,b=(0,s.useCallback)(function(){return f(!0)},[]),q=(0,s.useCallback)(function(){return f(!1)},[]),k=j.currentLocale,C={clickToSeeMore:"en"===k?"Click to see more":"Clique para ver mais",closeModal:"en"===k?"Close modal":"Fechar modal"};return(0,s.useEffect)(function(){if(x){var e=function(e){"Escape"===e.key&&q()};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",function(){document.removeEventListener("keydown",e),document.body.style.overflow=""}}},[x,q]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("button",{type:"button",onClick:b,className:n,"aria-haspopup":"dialog","aria-expanded":x,title:C.clickToSeeMore,children:[o,(0,v.jsx)("span",{className:d,"aria-hidden":"true",children:(0,v.jsx)(r,{})})]}),x&&(0,v.jsx)("div",{className:l,onClick:q,role:"presentation","aria-hidden":"true",children:(0,v.jsxs)("div",{className:t,onClick:function(e){return e.stopPropagation()},role:"dialog","aria-modal":"true","aria-labelledby":a?"modal-title":void 0,children:[(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)("h2",{id:"modal-title",className:c,children:null!=a?a:o}),(0,v.jsx)("button",{type:"button",onClick:q,className:u,"aria-label":C.closeModal,children:"\u2715"})]}),(0,v.jsx)("div",{className:p,children:h})]})})]})}}}]);