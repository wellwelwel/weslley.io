---
title: Introducing Unit Testing for Beginner Devs
slug: introduzindo-testes-unitarios-para-devs-iniciantes
date: 2024-06-10
authors: ['Weslley AraÃºjo']
tags: [Tests, Unit Tests, Node.js]
social: ./banner.png
---

If you're a beginner developer (_or not_), I want to show you that testing can be simple and that complexity only comes according to our needs.

{/* truncate */}

import { Modal } from '@Modal';

<hr />

## ğŸ§‘ğŸ»â€ğŸ“ Introduction to the World of Testing

Imagine a system where several users had their accounts compromised because they created passwords like "`1234`" and the system allowed it, even though there was validation for that â€” but with no guarantee the function was actually working ğŸ¥²

This could easily be avoided if there were tests ensuring the password validation function worked as it should whenever a change is made to the system, right? ğŸ”

But when a beginner developer looks for **automated testing**, it can seem (_or even **be**_) complex:

- _**Testers**_ may require environment configurations (especially around **ESM** and **TypeScript**)
- They can change the behavior of your development environment
- They may require you to adapt your code to work with them
- And they may demand prior, in-depth knowledge (documentation) just to get started

<hr />

## ğŸ“š Choosing the _Tester_

There are many testers today â€” some focused on best practices, others on productivity, performance, and so on.

Some of the most popular:

<ul>
  <li>
    <Modal trigger="Jest" title={<><img src="/img/jest.svg" alt="Jest icon" /> Jest</>}>
      **Jest** is a JavaScript testing framework maintained by **Meta** (Facebook), focused on providing a **complete and integrated** solution.

      It includes built-in features like **automatic mocking**, **code coverage**, and **snapshot testing**, and is especially popular in **React** projects.

      Being an all-in-one solution, it can require **complex configurations** for modern projects (especially **ESM** and **TypeScript**), and may have **lower performance** compared to newer alternatives.
    </Modal>

  </li>
  <li>
    <Modal trigger="Mocha" title="Mocha">
      **Mocha** is a **minimalist and flexible** test runner for Node.js, focused on **simplicity** and **extensibility**.

      Unlike Jest, Mocha doesn't include assertion or mocking libraries, letting you choose your own tools (commonly used with **Chai** for assertions and **Sinon** for mocks).

      It's ideal for those who prefer **full control** over the test environment, but it requires more manual configuration.
    </Modal>

  </li>
  <li>
    <Modal trigger="Vitest" title="Vitest">
      **Vitest** is a **modern** test runner developed by the same team behind **Vite**.

      It provides a **Jest-compatible** API that eases migration and offers native support for **ESM**, **TypeScript**, and **HMR** (Hot Module Replacement).

      Because it's coupled with **Vite**, it may not be ideal for all projects â€” especially those that don't use bundlers or prefer other build tools. It has a **strong frontend focus** (though it works on the backend) and **doesn't support CommonJS (CJS)**.
    </Modal>

  </li>
</ul>

For this tutorial, we'll use a tester I created ([**Poku**](https://github.com/wellwelwel/poku)) because of its simplicity, but you can use any tester you prefer ğŸš€

### ğŸ“¦ Installing our **_Tester_**

```bash
npm i -D poku
```

<hr />

## ğŸ§ª Why "Unit"?

When we develop code, it's common to split small tasks into smaller functions and export those functions to be used in multiple places.

Creating **unit tests** ensures those _"unit functions"_ always behave as expected ğŸ§™ğŸ»

<hr />

## ğŸ“‹ Creating a Simple Project

Let's build a very simple project where we'll only validate a password.
Our project needs to check that the provided password:

- âœ… Is a string
- âœ… Has at least eight characters
- âœ… Contains at least one uppercase letter
- âœ… Contains at least one lowercase letter
- âœ… Contains at least one number

If the password is valid, we should return `true`; otherwise, `false`.

To implement this, create the file:

- **src/validations.mjs**

```ts
export const validatePassword = (password) => {
  // Checks if the password is a string
  if (typeof password !== 'string') return false;

  // Checks if the password has 8 characters or more
  if (password.trim().length < 8) return false;

  // Checks if the password has at least one uppercase letter
  if (!/[A-Z]/.test(password)) return false;

  // Checks if the password has at least one lowercase letter
  if (!/[a-z]/.test(password)) return false;

  // Checks if the password has at least one number
  if (!/[0-9]/.test(password)) return false;

  // Returns true if all validations above pass
  return true;
};
```

> To keep the example simple, we won't go much further than this ğŸ§™ğŸ»

- Don't use this function in production; it's intentionally simple to focus on learning ğŸ§‘ğŸ»â€ğŸ“
- You can change from **src/validations.mjs** to **src/validations.js** by adding `"type": "module"` to your **package.json** ğŸ§™ğŸ»

<hr />

## ğŸ§‘ğŸ»â€ğŸ”¬ Understanding Tests

Theoretically, our function already works â€” this is usually when people start sprinkling `console.log` calls around, right? **Don't do that** ğŸ˜‚

Let's turn those ad-hoc `console.log`s into automated tests that will run whenever the project changes ğŸš€

How? Using assertions ğŸ‘‡ğŸ»

<hr />

### â˜‘ï¸ What Are Assertions?

In tests, **assertions** are used to ensure a result is exactly what we expect.

Each tester may provide a different API, but the idea is the same:

- If our check (assertion) does not match the expectation, the test fails with an error.

#### ğŸ“ Example:

Imagine `1 + 1` should return `2`, but it returned `"11"`.

When reaching the assertion that expects `2`, the test will fail and show that it expected `2` (a number) but received `"11"` (a string):

```js
import { assert } from 'poku';

assert.strictEqual('1' + '1', 2, '1+1 should return 2');
```

<img
  loading='lazy'
  width='474'
  alt='Assertion error'
  src='https://github.com/wellwelwel/poku/assets/46850407/f1dc1e18-7f9b-4ccb-880c-b0845464925f'
/>

- `actual`:
  - _"11"_ â€” the dynamic return (soft code) from our function or variable
- `expected`:
  - _2_ â€” the hard-coded value (hard code) that `actual` should match

> Both [**Poku**](https://github.com/wellwelwel/poku) and **Node.js** provide an `assert` API with similar usage ğŸ§™ğŸ»
>
> Functionally, [**Poku**](https://github.com/wellwelwel/poku) offers a simple and smart way to run multiple files and prints a clear report of passed and failed assertions in the terminal ğŸ·

#### ğŸ“ Fixing Our Example:

```js
import { assert } from 'poku';

assert.strictEqual(1 + 1, 2, '1+1 should return 2');
```

<img
  loading='lazy'
  width='474'
  alt='Successful assertion'
  src='https://github.com/wellwelwel/poku/assets/46850407/430a72eb-8d34-45f4-abc7-2f2f92e3dd8e'
/>

<hr />

## ğŸ§ª Creating the Tests

> Finally â€” the fun part ğŸ‰

We'll be a bit creative and generate:

- âŒ Several invalid passwords to simulate both typical users and malicious attempts
  - For invalid passwords we expect (`expected`) the result (`actual`) to be `false`.
- âœ… Valid passwords to make sure our function recognizes valid inputs when all criteria are met
  - For valid passwords we expect (`expected`) the result (`actual`) to be `true`.
- ğŸ“ No extra comments in the test â€” we'll describe each case directly in the assertion message

Create the test file:

- **test/password.test.mjs**

```js
import { assert } from 'poku';
import { validatePassword } from '../src/validations.mjs';

assert.strictEqual(
  validatePassword(),
  false,
  'Validates if the password is not provided'
);

assert.strictEqual(
  validatePassword(12345678),
  false,
  'Validates if the password is not a string'
);

assert.strictEqual(
  validatePassword(''),
  false,
  'Validates if the password is an empty string'
);

assert.strictEqual(
  validatePassword('abcd1234'),
  false,
  'Validates if the password does not have at least one uppercase letter'
);

assert.strictEqual(
  validatePassword('1234EFGH'),
  false,
  'Validates if the password does not have at least one lowercase letter'
);

assert.strictEqual(
  validatePassword('abcdEFGH'),
  false,
  'Validates if the password does not have at least one number'
);

assert.strictEqual(
  validatePassword('abcdEF12'),
  true,
  'Validates if the password is valid'
);
```

- You can switch from **test/password.test.mjs** to **test/password.test.js** by setting `"type": "module"` in your **package.json** ğŸ§™ğŸ»

<hr />

## ğŸ”¬ Checking If the Tests Passed

```bash
npx poku
```

- When you run `npx poku`, by default the tester will look for files with the `*.test.*` or `*.spec.*` extension in the current directory ğŸ§™ğŸ»

And finally, the result:

<img
  loading='lazy'
  width='522'
  alt='Success Example with Poku'
  src='https://github.com/wellwelwel/poku/assets/46850407/f06105a3-f956-473f-b456-26c1e27d80db'
/>

- The first line shows the directory where [**Poku**](https://github.com/wellwelwel/poku) is searching for tests
- The second line shows the file currently being tested
  - Inside each test file it lists all assertions that include a message
  - When finished (success or failure), it shows the command it ran for that file:
    - `node test/password.test.mjs`
- When all test files finish, it shows a summary of how many files passed and/or failed
- The exit code will be:
  - âœ… `0` for success
  - âŒ `1` for failure

<hr />

## ğŸ’­ Conclusion

With the **unit tests** we created, we ensure not only that our function behaves as expected, but also that we can anticipate how our project reacts in unusual situations before they occur ğŸ”

> I hope I've shown that **tests** can indeed be **simple** ğŸ§‘ğŸ»â€ğŸ“

<hr />

- This was my first "lesson" in blog format. Feedback is always welcome ğŸ©µ
- Many terms are explained multiple times by choice for didactic purposes â€” let me know if it felt repetitive ğŸ§‘ğŸ»â€ğŸ“

:::info
This article was initially posted on [TabNews](https://www.tabnews.com.br/wellwelwel/tutorial-introduzindo-testes-unitarios-para-devs-iniciantes-js).
:::
