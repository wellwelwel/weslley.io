---
title: Prevenindo o envio de emails maliciosos atravÃ©s do seu domÃ­nio
slug: prevenindo-o-envio-de-emails-maliciosos-atraves-do-seu-dominio
date: 2024-06-10
authors: ['Weslley AraÃºjo']
tags: [SeguranÃ§a, DNS, Email, SPF, DKIM, DMARC, MX]
social: ./banner.png
sides:
  - id: developer
    label: Sou um Desenvolvedor
    description: Aprenda como configurar seu domÃ­nio de forma segura contra E-mail Spoofing.
  - id: user
    label: Sou um UsuÃ¡rio Final
    description: Aprenda como se proteger contra e-mails falsos vindos de remetentes "reais".
---

Sabia que pessoas mal intencionadas podem estar usando seu domÃ­nio para enviar e-mails falsos?

{/* truncate */}

import { Modal } from '@Modal';
import { Side } from '@Side';

<Side id="developer">

Essa tÃ©cnica Ã© conhecida como E-mail Spoofing e explora a falta de autenticaÃ§Ã£o no envio de e-mails de um domÃ­nio, falsificando o remetente e fazendo parecer que a mensagem foi enviada por um domÃ­nio confiÃ¡vel.

Tanto empresas pequenas e grandes podem ser alvos, assim como sites pessoais ou abandonados, onde o intuito pode variar desde capturar dados sensÃ­veis e atÃ© infectar dispositivos dos usuÃ¡rios. Tudo isso, usando domÃ­nios vÃ¡lidos sem autorizaÃ§Ã£o.

Os motivos podem variar, mas vou citar alguns super comuns que tornam essa vulnerabilidade possÃ­vel:

- Falta de conhecimento ou atÃ© mesmo negligÃªncia.
- O provedor do domÃ­nio exige um plano pago Ã  parte para e-mails que o usuÃ¡rio nÃ£o estÃ¡ disposto a adquirir.

<hr />

## PossÃ­veis impactos negativos ğŸ‘¾

- Perda de credibilidade.
- Bloqueio por provedores de e-mail (onde atÃ© mesmo seus e-mails vÃ¡lidos podem ser afetados ao serem entregues como spam ou nem mesmo chegarem ao destinatÃ¡rio).
- Perda do domÃ­nio (denÃºncias, medidas legais ou atÃ© mesmo pela reputaÃ§Ã£o muito prejudicada).

<hr />

## Como se proteger? ğŸ¤

Nesse artigo, vou abordar tÃ³picos como SPF, DKIM e DMARC para proteger seu domÃ­nio e evitar que pessoas maliciosas consigam acesso nÃ£o autorizado ao seu domÃ­nio.

### DNS

O **DNS** Ã© onde vocÃª configura os registros relacionados ao seu domÃ­nio, como subdomÃ­nios, redirecionamentos, envio e recebimento de e-mails, entre outros.

Ao comprar um domÃ­nio, Ã© comum usuÃ¡rios se preocuparem especialmente com o IP da hospedagem. Aqui Ã© onde mora um dos problemas, pois ao notar que o domÃ­nio jÃ¡ estÃ¡ funcionando, o usuÃ¡rio pode considerar que o trabalho jÃ¡ estÃ¡ completo.

Dito isso, vamos conhecer os principais registros relacionados ao e-mail:

### MX (Mail Exchange)

O registro **MX** Ã© o responsÃ¡vel por vocÃª receber os e-mails, direcionando-os do seu domÃ­nio para o servidor responsÃ¡vel por recebÃª-los (**Google Workspace**, **Zoho**, etc.).

Sem ele, os e-mails que te enviarem nunca chegarÃ£o atÃ© vocÃª.

### SPF

O registro **SPF** Ã© uma forma de dizer quais servidores estÃ£o autorizados a enviar e-mails em nome do seu domÃ­nio, ajudando a evitar que pessoas mal intencionadas usem seu domÃ­nio.

Ele Ã© especialmente importante contra o E-mail Spoofing, sendo geralmente reforÃ§ado pelo parÃ¢metro `~all`.

#### Dica:

Enquanto a maioria dos servidores de e-mail sugerem `~all` devido Ã  flexibilidade, se seu domÃ­nio jÃ¡ foi vÃ­tima de **E-mail Spoofing** ou vocÃª quer reforÃ§ar ainda mais sua seguranÃ§a, vocÃª pode usar `-all` para eliminar a possibilidade de aceitaÃ§Ã£o por baixa prioridade de forma estrita, mas note que isso implica na complexidade das configuraÃ§Ãµes do **DNS**, exigindo atualizaÃ§Ãµes manuais sempre que novos serviÃ§os de e-mail forem integrados ao seu domÃ­nio.

### DKIM

O registro **DKIM** adiciona uma assinatura digital aos e-mails enviados pelo seu domÃ­nio, permitindo que o servidor que recebe o seu e-mail verifique se a mensagem foi realmente enviada por vocÃª e nÃ£o foi alterada no caminho, sendo uma ferramenta complementar essencial ao **SPF**.

Isso ajuda a proteger tanto a reputaÃ§Ã£o do seu domÃ­nio quanto os destinatÃ¡rios, alÃ©m de indiretamente evitar que seus e-mails sejam entregues como spam.

### DMARC

O registro **DMARC** permite que vocÃª defina como os servidores de e-mail devem tratar mensagens que falharem na validaÃ§Ã£o do SPF e do DKIM, fornecendo relatÃ³rios detalhados sobre tentativas indevidas usando seu domÃ­nio, permitindo monitorar possÃ­veis abusos.

<hr />

## SoluÃ§Ãµes e alternativas gratuitas ğŸŒŸ

Se seu provedor nÃ£o possui um servidor de e-mails ou vocÃª nÃ£o pretende usar um plano pago para isso, vocÃª pode usar gratuitamente o DNS com o roteamento de e-mails da Cloudflare, redirecionando os e-mails do seu domÃ­nio para outro e-mail (por exemplo, um e-mail pessoal do Gmail).

O Zoho tambÃ©m pode ser uma boa alternativa, nÃ£o sendo necessÃ¡rio redirecionar seus e-mails e oferecendo um dashboard prÃ³prio para os e-mails do seu domÃ­nio, mas ele possui limitaÃ§Ãµes de recurso em sua versÃ£o gratuita.

â€” Curtiu aprender um pouco mais sobre seguranÃ§a? ğŸ”

:::note
Esse artigo nÃ£o possui nenhum tipo de patrocÃ­nio e essas sÃ£o sugestÃµes que uso tanto pessoalmente, como profissionalmente ğŸ™‹ğŸ»
:::

:::info
Esse artigo foi postado icialmente no [LinkedIn](https://www.linkedin.com/pulse/e-mail-spoofing-prevenindo-o-envio-de-emails-atrav%25C3%25A9s-do-ara%25C3%25BAjo-ff2xc/).
:::

</Side>

<Side id="user">

JÃ¡ recebeu e-mails falsos vindos de contas reais? Vem entender a importÃ¢ncia de configurar o DNS do seu site e como se proteger tanto como usuÃ¡rio, como desenvolvedor ğŸ“¨ğŸ£

Constantemente recebo e-mails maliciosos e os que mais me chamam atenÃ§Ã£o, sÃ£o os que vÃªm de domÃ­nios vÃ¡lidos de empresas reais (e sÃ©rias).

## Mas como alguÃ©m pode usar um domÃ­nio sem autorizaÃ§Ã£o? ğŸ¤¨

Essa tÃ©cnica Ã© conhecida como "E-mail Spoofing" e Ã© abordada com mais detalhes no artigo, enquanto essa publicaÃ§Ã£o Ã© focada em nos protegermos como usuÃ¡rios.

ğŸ§‘ğŸ»â€ğŸ”¬ Vamos lÃ¡:

Um e-mail em especial me deixou curioso, pois o domÃ­nio que foi usado Ã© de uma das 10 maiores empresas do paÃ­s. Decidi abrir em um ambiente controlado e, sÃ³ para lembrar, aba anÃ´nima de navegador nÃ£o Ã© ambiente controlado ğŸ§™ğŸ»â€â™‚ï¸

Imaginei que seria "apenas" uma pÃ¡gina de login falsa, mas foram feitos vÃ¡rios redirecionamentos e pedidos de permissÃµes no navegador, para sÃ³ entÃ£o chegar na tela de login ğŸ£

Esses redirecionamentos podem ser usados, por exemplo, para roubar cookies ou acessar permissÃµes de cÃ¢mera e microfone sem o nosso consentimento.

O fato do e-mail vir de um domÃ­nio que nÃ³s confiamos, pode nos induzir desde a clicar, aceitar permissÃµes (que navegadores podem inclusive jÃ¡ ter como ativadas por padrÃ£o) e atÃ© a inserir nossas credenciais em um site falso.

## Como se previnir como usuÃ¡rio? ğŸ”

- Suspeite de e-mails que oferecem algo que vocÃª nÃ£o solicitou, independente do remetente.
- Verifique se o domÃ­nio faz sentido com o que foi recebido, por exemplo, ao receber cobranÃ§as de uma empresa, mas o domÃ­nio veio de outra (mesmo que real).
- Prefira usar o computador ao invÃ©s do celular para abrir links, onde vocÃª pode passar o mouse por cima do link sem clicar e verificar se o destino realmente leva para o site que vocÃª espera.
- O link comeÃ§a com o site esperado, mas possui um @? Cuidado, isso pode ser outra tÃ©cnica chamada URL Obfuscation, que consiste em mascarar o verdadeiro destino do link.
- Tem algum arquivo anexo nesse e-mail? Jamais baixe ou abra, por mais curioso que o e-mail te deixe.
- Na dÃºvida, entre em contato com os canais oficiais da empresa (e nÃ£o os que constam no e-mail).

Quando o domÃ­nio de uma empresa Ã© usado para esses fins, Ã© interessante notar que a empresa tambÃ©m Ã© uma vÃ­tima, mas isso nÃ£o significa que ela estÃ¡ isenta de responsabilidade. O que nos leva ao prÃ³ximo tÃ³pico:

â€” Curtiu aprender um pouco mais sobre seguranÃ§a? ğŸ”

</Side>
